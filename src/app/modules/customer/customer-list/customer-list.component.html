<div class="customer-list-container">
  <!-- Hero Header Section -->
  <div class="hero-header">
    <div class="hero-content">
      <div class="hero-left">
        <div class="hero-title">
          <i class="pi pi-users hero-icon"></i>
          <div class="title-text">
            <h1>Cari Yönetimi</h1>
            <p>Carilerinizi kolayca yönetin ve takip edin</p>
          </div>
        </div>
      </div>
      <div class="hero-right">
        <p-button 
          label="Yeni Cari Ekle" 
          icon="pi pi-user-plus" 
          severity="primary"
          size="large"
          [raised]="true"
          (click)="navigateToCreateCustomer()"
          styleClass="create-customer-btn"
        ></p-button>
      </div>
    </div>
  </div>

  <!-- Main Table Card -->
  <div class="main-card">
    <div class="card-header">
      <div class="header-left">
        <h3 class="section-title">
          <i class="pi pi-list"></i>
          Cari Listesi
        </h3>
        <p class="section-subtitle">Tüm carileri görüntüleyin ve yönetin</p>
      </div>
    </div>

    <p-table #dt [value]="customers" 
             [paginator]="false"
             [loading]="false"
             responsiveLayout="scroll"
             [scrollable]="true"
             [globalFilterFields]="['Name','Surname','Email', 'Phone']">
        
        <ng-template pTemplate="caption">
            <div class="table-toolbar">
                <div class="search-section">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" 
                               (input)="onGlobalFilter(dt, $event)" 
                               placeholder="Cari ara..." 
                               class="search-input" />
                    </span>
                </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="Name" class="name-column">
                    Ad <p-sortIcon field="Name"></p-sortIcon>
                </th>
                <th pSortableColumn="Surname" class="surname-column">
                    Soyad <p-sortIcon field="Surname"></p-sortIcon>
                </th>
                <th pSortableColumn="Phone" class="phone-column">
                    Telefon <p-sortIcon field="Phone"></p-sortIcon>
                </th>
                <th pSortableColumn="Email" class="email-column">
                    E-posta <p-sortIcon field="Email"></p-sortIcon>
                </th>
                <th class="actions-column">İşlemler</th>
            </tr>
        </ng-template>
        
        <ng-template pTemplate="body" let-customer>
            <tr class="customer-row">
                <td class="name-column">
                    <div class="customer-name-cell">
                        <div class="customer-avatar">
                            <i class="pi pi-user"></i>
                        </div>
                        <strong class="customer-name">{{ customer.Name }}</strong>
                    </div>
                </td>
                <td class="surname-column">
                    <span class="customer-surname">{{ customer.Surname }}</span>
                </td>
                <td class="phone-column">
                    <div class="contact-cell">
                        <i class="pi pi-phone contact-icon"></i>
                        <span>{{ customer.Phone }}</span>
                    </div>
                </td>
                <td class="email-column">
                    <div class="contact-cell">
                        <i class="pi pi-envelope contact-icon"></i>
                        <span>{{ customer.Email }}</span>
                    </div>
                </td>
                <td class="actions-column">
                    <div class="action-buttons">
                        <!-- <p-button 
                            icon="pi pi-eye" 
                            severity="info"
                            [text]="true"
                            size="small"
                            (click)="editCustomer(customer)" 
                            pTooltip="Detay"
                        ></p-button> -->
                        <p-button 
                            icon="pi pi-pencil" 
                            severity="secondary"
                            [text]="true"
                            size="small"
                            (click)="editCustomer(customer)"
                            pTooltip="Düzenle"
                        ></p-button>
                        <p-button 
                            icon="pi pi-trash" 
                            severity="danger"
                            [text]="true"
                            size="small"
                            (click)="openDeleteCustomerDialog(customer)"
                            pTooltip="Sil"
                        ></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
        
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5" class="empty-message">
                    <div class="empty-state">
                        <i class="pi pi-users empty-icon"></i>
                        <h3>Hiç cari bulunamadı</h3>
                        <p>Arama kriterlerinize uygun cari bulunamadı.</p>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    
    <p-paginator
        [rows]="requestModel.Limit"
        [totalRecords]="pagination?.TotalCount || 0"
        [first]="(requestModel.Page - 1) * requestModel.Limit"
        [rowsPerPageOptions]="[5,10, 25, 50, 100]"
        [showFirstLastIcon]="true"
        [showCurrentPageReport]="true"
        (onPageChange)="onPageChange($event)" 
        currentPageReportTemplate="Toplam {totalRecords} kayıttan {first} - {last} arası gösteriliyor"
        styleClass="custom-paginator">
    </p-paginator>
  </div>
</div>
<p-dialog [(visible)]="deleteCustomerDialog" header="Onayla" [modal]="true" [style]="{width:'350px'}">
  <div class="flex align-items-center justify-content-center">
    <i class="pi pi-exclamation-triangle mr-3 warning-icon"></i>
    <span>Seçili cariyi silmek istediğinize emin misiniz?</span>
  </div>
  <ng-template pTemplate="footer">
    <button pButton pRipple icon="pi pi-times" class="p-button-text" label="Hayır" (click)="closeDeleteCustomerDialog()" title="Hayır" type="button"></button>
    <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Evet" (click)="confirmDeleteCustomer()" title="Evet" type="button"></button>
  </ng-template>
</p-dialog>