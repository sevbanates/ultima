<div class="user-list-container">
  <!-- Hero Header Section -->
  <div class="hero-header">
    <div class="hero-content">
      <div class="hero-left">
        <div class="hero-title">
          <i class="pi pi-users hero-icon"></i>
          <div class="title-text">
            <h1>Kullanıcı Yönetimi</h1>
            <p>Sistem kullanıcılarını kolayca yönetin ve takip edin</p>
          </div>
        </div>
      </div>
      <div class="hero-right">
        <p-button 
          label="Yeni Kullanıcı Ekle" 
          icon="pi pi-user-plus" 
          severity="primary"
          size="large"
          [raised]="true"
          (click)="navigateToCreateUser()"
          styleClass="create-user-btn"
        ></p-button>
      </div>
    </div>
  </div>

  <!-- Main Table Card -->
  <div class="main-card">
    <div class="card-header">
      <div class="header-left">
        <h3 class="section-title">
          <i class="pi pi-list"></i>
          Kullanıcı Listesi
        </h3>
        <p class="section-subtitle">Tüm sistem kullanıcılarını görüntüleyin ve yönetin</p>
      </div>
    </div>

    <p-table #dt [value]="users" 
             [paginator]="false"
             [loading]="false"
             responsiveLayout="scroll"
             [scrollable]="true"
             [globalFilterFields]="['FirstName','LastName','Email']">
        
        <ng-template pTemplate="caption">
            <div class="table-toolbar">
                <div class="search-section">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" 
                               (input)="onGlobalFilter(dt, $event)" 
                               placeholder="Kullanıcı ara..." 
                               class="search-input" />
                    </span>
                </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="FirstName" class="name-column">
                    Ad <p-sortIcon field="FirstName"></p-sortIcon>
                </th>
                <th pSortableColumn="LastName" class="lastname-column">
                    Soyad <p-sortIcon field="LastName"></p-sortIcon>
                </th>
                <th class="phone-column">
                    Telefon <p-sortIcon field="PhoneNumber"></p-sortIcon>
                </th>
                <th pSortableColumn="Email" class="email-column">
                    E-posta <p-sortIcon field="Email"></p-sortIcon>
                </th>
                <th class="role-column">Rol</th>
                <th class="actions-column">İşlemler</th>
            </tr>
        </ng-template>
        
        <ng-template pTemplate="body" let-user>
            <tr class="user-row">
                <td class="name-column">
                    <div class="user-name-cell">
                        <div class="user-avatar">
                            <i class="pi pi-user"></i>
                        </div>
                        <strong class="user-name">{{ user.FirstName }}</strong>
                    </div>
                </td>
                <td class="lastname-column">
                    <span class="user-lastname">{{ user.LastName }}</span>
                </td>
                <td class="phone-column">
                    <div class="contact-cell">
                        <i class="pi pi-phone contact-icon"></i>
                        <span>{{ user.PhoneNumber || '-' }}</span>
                    </div>
                </td>
                <td class="email-column">
                    <div class="contact-cell">
                        <i class="pi pi-envelope contact-icon"></i>
                        <span>{{ user.Email }}</span>
                    </div>
                </td>
                <td class="role-column">
                    <p-tag 
                        [value]="user.IsAdmin ? 'Admin' : 'Kullanıcı'" 
                        [severity]="user.IsAdmin ? 'danger' : 'info'"
                    ></p-tag>
                </td>
                <td class="actions-column">
                    <div class="action-buttons">
                        <p-button 
                            icon="pi pi-eye" 
                            severity="info"
                            [text]="true"
                            size="small"
                            (click)="editUser(user)" 
                            pTooltip="Detay"
                        ></p-button>
                        <p-button 
                            icon="pi pi-pencil" 
                            severity="secondary"
                            [text]="true"
                            size="small"
                            (click)="editUser(user)"
                            pTooltip="Düzenle"
                        ></p-button>
                        <p-button 
                            icon="pi pi-trash" 
                            severity="danger"
                            [text]="true"
                            size="small"
                            (click)="openDeleteUserDialog(user)"
                            pTooltip="Sil"
                        ></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
        
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="6" class="empty-message">
                    <div class="empty-state">
                        <i class="pi pi-users empty-icon"></i>
                        <h3>Hiç kullanıcı bulunamadı</h3>
                        <p>Arama kriterlerinize uygun kullanıcı bulunamadı.</p>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    
    <p-paginator
        [rows]="requestModel.Limit"
        [totalRecords]="pagination?.TotalCount || 0"
        [first]="(requestModel.Page - 1) * requestModel.Limit"
        [rowsPerPageOptions]="[5,10, 25, 50, 100]"
        [showFirstLastIcon]="true"
        [showCurrentPageReport]="true"
        (onPageChange)="onPageChange($event)" 
        currentPageReportTemplate="Toplam {totalRecords} kayıttan {first} - {last} arası gösteriliyor"
        styleClass="custom-paginator">
    </p-paginator>
  </div>
</div>
<p-dialog [(visible)]="deleteUserDialog" header="Onayla" [modal]="true" [style]="{width:'350px'}">
  <div class="flex align-items-center justify-content-center">
    <i class="pi pi-exclamation-triangle mr-3 warning-icon"></i>
    <span>Seçili kullanıcıyı silmek istediğinize emin misiniz?</span>
  </div>
  <ng-template pTemplate="footer">
    <button pButton pRipple icon="pi pi-times" class="p-button-text" label="Hayır" (click)="closeDeleteUserDialog()" title="Hayır" type="button"></button>
    <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Evet" (click)="confirmDeleteUser()" title="Evet" type="button"></button>
  </ng-template>
</p-dialog>